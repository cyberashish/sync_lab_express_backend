import{j as e,_ as N,r as l,a7 as D,a as C,I}from"./index-CK2Vs4T7.js";import{C as M}from"./card-C9QVMAe5.js";import{u as q,i as T,T as E,a as F,b as m,c as A,f as x,d as k,e as K,k as V,g as H,h as P}from"./TableSkeleton-C-Ao0mJm.js";import{I as h}from"./iconify-tsyH9H0w.js";import{f as B}from"./format-SmSpYad1.js";const L=[{accessorKey:"employeeId",header:"Id",cell:({row:t})=>e.jsx("p",{className:"text-primary",children:t.getValue("employeeId")})},{accessorKey:"name",header:"Name"},{accessorKey:"designation",header:"Position"},{accessorKey:"description",header:"Description"},{accessorKey:"date",header:({column:t})=>e.jsxs("button",{onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),className:"flex cursor-pointer group hover:text-primary items-center gap-2",children:[e.jsx("span",{children:"Applied Date"}),e.jsx(h,{icon:"mi:sort",width:20,height:20,className:"text-muted group-hover:text-primary"})]}),cell:({row:t})=>e.jsx("p",{children:N(t.getValue("date"))}),sortingFn:(t,r)=>{const o=new Date(t.getValue("date")),d=new Date(r.getValue("date"));return o.getTime()-d.getTime()}},{accessorKey:"leaveDates",header:()=>e.jsx("button",{className:"flex cursor-pointer group hover:text-primary items-center gap-2",children:e.jsx("span",{children:"Leave Dates"})}),cell:({row:t})=>{const r=t.getValue("leaveDates");return e.jsxs("p",{className:"text-sm",children:[" ",r.map(o=>B(new Date(o.date),"do MMM")).join(", ")]})}},{accessorKey:"leave",header:"Leave"},{accessorKey:"requestStatus",header:"Status",cell:({row:t})=>{const r=t.getValue("requestStatus"),o=t.original.isRequestApproved;return r!=="pending"?o?e.jsx("span",{className:"py-0.5 px-2 text-xs bg-success/20 text-success rounded-full",children:"Approved"}):e.jsx("span",{className:"py-0.5 px-2 text-xs bg-red-500/20 text-red-500 rounded-full",children:"Rejected"}):e.jsx("span",{className:"py-0.5 px-2 text-xs bg-yellow-500/20 text-yellow-500 rounded-full",children:"Pending"})}}],Y={isSearchFocussed:!1,searchInput:""};function _(){const t="SEARCH_INPUT",r="SEARCH_INPUT_FOCUSSED",[o,d]=l.useState([]),g=(a,s)=>{switch(s.type){case t:return{...a,searchInput:s.payload};case r:return{...a,isSearchFocussed:s.payload};default:return a}},[u,c]=l.useReducer(g,Y),[p,f]=l.useState([]),[y,{isLoading:j}]=D(),i=C(a=>a.employee),b=()=>{c({type:r,payload:!0})},w=()=>{c({type:r,payload:!1})},R=l.useMemo(()=>[...p],[p]);l.useEffect(()=>{o&&f(o)},[o]);async function S(a){const s=await y({email:a});d(s.data.data.requests)}l.useEffect(()=>{i&&S(i.email)},[i]);const n=q({data:R,columns:L,getCoreRowModel:P(),getFilteredRowModel:H(),getSortedRowModel:V()}),v=a=>{var s;c({type:t,payload:a.target.value}),(s=n.getColumn("name"))==null||s.setFilterValue(a.target.value)};return e.jsx(e.Fragment,{children:e.jsxs(M,{className:"p-0",children:[e.jsxs("div",{className:"p-6 border-b border-border flex items-center lg:flex-nowrap gap-2 flex-wrap justify-between",children:[e.jsx("h5",{className:"text-lg font-semibold leading-none text-dark",children:"Leave Request Status"}),e.jsxs("div",{className:`flex items-center border rounded-md px-3 flex-1 max-w-80 min-w-40 ${u.isSearchFocussed?"border-primary ":"border-border"}`,children:[e.jsx(h,{icon:"si:search-line",width:20,height:20,className:"shrink-0 text-dark"}),e.jsx(I,{onBlur:w,onFocus:b,onChange:v,value:u.searchInput,type:"search",id:"email",name:"email",placeholder:"Search by name...",className:"max-w-80 h-9 bg-transparent dark:bg-transparent dark:text-white shadow-none border-none px-2"})]})]}),e.jsx("div",{className:"p-6 pt-0",children:e.jsx("div",{className:"rounded-md border border-border overflow-hidden",children:j?e.jsx(T,{}):e.jsxs(E,{className:"font-medium",children:[e.jsx(F,{children:n.getHeaderGroups().map(a=>e.jsx(m,{children:a.headers.map(s=>e.jsx(A,{className:"first:px-4",children:s.isPlaceholder?null:x(s.column.columnDef.header,s.getContext())},s.id))},a.id))}),e.jsx(k,{children:n.getRowModel().rows.length?n.getRowModel().rows.map(a=>e.jsx(m,{children:a.getVisibleCells().map(s=>e.jsx(K,{className:"first:px-4",children:x(s.column.columnDef.cell,s.getContext())},s.id))},a.id)):null})]})})})]})})}function J(){return e.jsx(_,{})}export{J as default};
