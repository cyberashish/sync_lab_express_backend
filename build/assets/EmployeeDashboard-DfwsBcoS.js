import{x as v,d as j,u as b,a as m,r as d,j as e,y,z as N}from"./index-snz9Drzv.js";import{C as h,a as L}from"./card-B1be1i6x.js";import{I as u}from"./iconify-C_4D0c8V.js";import{C as w}from"./react-apexcharts.min-DpLsuH1N.js";const k="/assets/employee-DW0uicLu.png";function C(){var n,x,r;const[t]=v(),{data:s}=j(void 0),l=b(),a=m(i=>i.employee);async function p(i){const c=await t({email:i});l(N(c.data.data))}if(d.useEffect(()=>{var i,c;s&&((i=s==null?void 0:s.data)==null?void 0:i.role)!=="admin"&&p((c=s==null?void 0:s.data)==null?void 0:c.email)},[s]),a)return e.jsx(h,{className:"p-0",children:e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between bg-gray-900 text-white px-4 py-3 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[(n=s==null?void 0:s.data)!=null&&n.image?e.jsx("img",{src:(x=s==null?void 0:s.data)==null?void 0:x.image,alt:"Profile",className:"w-12 h-12 rounded-full border-2 border-white"}):e.jsx("span",{className:"size-12 rounded-full bg-primary/10 text-primary flex items-center justify-center text-2xl font-medium",children:(r=s==null?void 0:s.data)==null?void 0:r.fullname.split("")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg leading-tight",children:a==null?void 0:a.name}),e.jsxs("p",{className:"text-sm text-gray-300 flex items-center gap-2",children:[a==null?void 0:a.designation,e.jsx("span",{className:"text-orange-500 text-xs",children:"●"}),a==null?void 0:a.department]})]})]})}),e.jsxs("div",{className:"px-5 py-4 relative",children:[e.jsxs("div",{className:"space-y-4 text-sm lg:col-span-7 col-span-12",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Phone Number"}),e.jsx("p",{className:"font-medium",children:a.mobile_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Email Address"}),e.jsx("p",{className:"font-medium break-all",children:a==null?void 0:a.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Report Office"}),e.jsx("p",{className:"font-medium",children:(a==null?void 0:a.reportOffice)??"Ahmedabad"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Joined on"}),e.jsx("p",{className:"font-medium",children:y(a.employeeJoiningDate)})]})]}),e.jsx("img",{src:k,alt:"employee_image",className:"absolute lg:block hidden -top-6 end-6 lg:w-5/12"})]})]})})}function E(){const t=m(l=>l.employee),s=[{id:"1",title:"Allotted Leaves",subtitle:"Leaves allotted to you",icon:"solar:calendar-linear",color:"bg-primary/10 text-primary",value:t.allottedLeaves??0},{id:"2",title:"Available Leaves",subtitle:"Your available leaves",icon:"tdesign:undertake-delivery",color:"bg-success/10 text-success",value:t.allottedLeaves?t.allottedLeaves-t.totalLeaves:0},{id:"3",title:"Consumed Leaves",subtitle:"Your all taken leaves",icon:"ri:progress-3-line",color:"bg-warning/10 text-warning",value:t.totalLeaves??0},{id:"4",title:"Overtime",subtitle:"Additional working days",icon:"lsicon:overtime-filled",color:"bg-error/10 text-error",value:t.overtimeDays??0}];return e.jsx("div",{className:"grid grid-cols-12 gap-6",children:s.map(l=>e.jsx("div",{className:"lg:col-span-3 col-span-12",children:e.jsx(h,{children:e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold text-dark",children:l.title}),e.jsx("p",{className:"text-sm text-muted",children:l.subtitle})]}),e.jsx("span",{className:`size-12 rounded-full ${l.color} flex items-center justify-center`,children:e.jsx(u,{icon:l.icon,width:28,height:28,className:"shrink-0"})})]}),e.jsx("div",{className:"flex flex-col items-start mt-2",children:e.jsx("h6",{className:"text-2xl text-dark dark:text-white font-semibold",children:l.value})})]})})},l.id))})}function D(){const t=m(o=>o.employee),[s,l]=d.useState(0),[a,p]=d.useState(0),[n,x]=d.useState(0),r=m(o=>o.userMode.theme),i=[s??0,a??0,n??0],c={chart:{type:"donut",foreColor:r==="light"?"var(--color-dark)":"#adb0bb"},labels:["Sick","Casual","Vacation"],colors:["var(--color-warning)","var(--color-error)","var(--color-success)"],dataLabels:{enabled:!1},legend:{show:!1},plotOptions:{pie:{donut:{size:"75%",labels:{show:!0,total:{show:!0,showAlways:!1,label:"Total",fontSize:"19px",fontFamily:"inherit",fontWeight:600,color:r==="light"?"var(--color-dark)":"#ffffff",formatter:function(o){return o.globals.seriesTotals.reduce((g,f)=>g+f,0)}}}}}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]};return d.useEffect(()=>{t&&(l(t.sickLeaves),p(t.casualLeaves),x(t.vacationLeaves))},[t]),e.jsx("div",{children:e.jsx(w,{options:c,series:i,type:"donut",width:"100%",height:"180px"},a||s||n)},r)}function S(){const t=m(l=>l.employee),s=[{id:"2",icon:"tdesign:undertake-delivery",metric:"Leaves Taken",amount:`${t.totalLeaves??0}`,color:"bg-primary/10 text-primary"},{id:"3",icon:"fluent:beach-28-regular",metric:"Casual Leaves",amount:`${t.casualLeaves??0}`,color:"bg-error/10 text-error"},{id:"4",icon:"solar:hospital-outline",metric:"Sick Leaves",amount:`${t.sickLeaves??0}`,color:"bg-warning/10 text-warning"},{id:"5",icon:"material-symbols-light:holiday-village-outline-rounded",metric:"Vacation Leaves",amount:`${t.vacationLeaves??0}`,color:"bg-success/10 text-success"}];if(t)return e.jsx(e.Fragment,{children:e.jsx(h,{className:"p-0",children:e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-border",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Leave Details"}),e.jsxs("span",{className:"flex items-center gap-1 text-sm text-dark dark:text-white border border-border rounded-sm px-3 py-1.5",children:[e.jsx(u,{icon:"uil:calendar",width:16,height:16}),"2025"]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-0 p-6",children:[e.jsx("div",{className:"lg:col-span-8 col-span-12 grid grid-cols-12 gap-2 gap-y-6",children:s.map(l=>e.jsxs("div",{className:"lg:col-span-6 col-span-12 flex flex-col items-start gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-base font-medium",children:[e.jsx("span",{className:`size-10 flex items-center justify-center rounded-full ${l.color} shrink-0`,children:e.jsx(u,{icon:l.icon,width:20,height:20,className:"shrink-0"})}),l.metric]}),e.jsx("h4",{className:"text-xl font-semibold ms-1",children:l.amount})]}))}),e.jsx("div",{className:"lg:col-span-4 col-span-12",children:e.jsx(D,{})})]})]})})})}function O(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-12",children:e.jsx(E,{})}),e.jsx("div",{className:"lg:col-span-6 col-span-12",children:e.jsx(C,{})}),e.jsx("div",{className:"lg:col-span-6 col-span-12",children:e.jsx(S,{})})]})})}export{O as default};
